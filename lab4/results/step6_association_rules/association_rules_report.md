# 关联规则分析报告

## 1. 分析概述
本报告总结了Step6关联规则分析的结果。我们使用Apriori算法从COVID-19患者数据中挖掘有意义的关联规则，最大规则长度不超过3。

## 2. 分析方法

### 2.1 数据准备
- 使用患者结局数据 (patient_outcome_processed.csv)
- 离散化连续特征为分类变量
- 创建事务数据库，每个患者为一个事务
- 包含临床指标、缺失指示器和患者结局

### 2.2 特征处理
- 连续特征：使用分位数离散化为低、中、高三组
- 二值特征：直接使用（Missing_*, Tested_*）
- 分类特征：保持原状
- 患者结局：作为特殊项（Deceased, Alive）

### 2.3 关联规则挖掘
- 算法：Apriori算法
- 最大项集长度：3
- 支持度阈值：动态调整
- 评估指标：支持度、置信度、提升度

## 3. 主要发现

### 3.1 频繁项集
- 发现了不同长度的频繁项集
- 分析了项集的支持度分布
- 识别了最常见的特征组合

### 3.2 关联规则
- 生成了具有统计意义的关联规则
- 分析了规则的质量指标
- 发现了临床有意义的模式

### 3.3 临床相关规则
- 识别了与死亡结局相关的规则
- 发现了风险因素的组合模式
- 揭示了临床检测行为与结局的关联

## 4. 文件输出

### 4.1 事务数据
- `transactions/transactions.txt` - 原始事务数据
- `transactions/item_frequencies.csv` - 项频率统计

### 4.2 频繁项集
- `rules/frequent_itemsets_length_*.json` - 按长度分组的频繁项集

### 4.3 关联规则
- `rules/all_association_rules.json` - 所有关联规则
- `rules/association_rules.csv` - 关联规则表格
- `rules/top_rules_by_*.json` - 按不同指标排序的Top规则

### 4.4 可视化图表
- `visualizations/` - 所有可视化图表
- 包括支持度分布、项集长度分布、规则散点图等

## 5. 临床意义

### 5.1 风险模式识别
关联规则分析能够发现临床指标的组合模式，这些模式可能对应特定的风险表型。

### 5.2 检测行为分析
通过分析缺失指示器和检测指示器的关联，可以了解临床实践模式与患者结局的关系。

### 5.3 预警规则发现
高置信度的关联规则可以作为临床预警规则，帮助早期识别高危患者。

## 6. 局限性

1. 关联规则反映相关性，不一定是因果关系
2. 离散化可能丢失连续特征的细节信息
3. 需要临床专家验证规则的实际意义
4. 规则数量可能较多，需要进一步筛选

## 7. 后续建议

1. 临床验证：邀请临床专家评估规则的医学合理性
2. 规则筛选：基于临床重要性进一步筛选规则
3. 时序分析：如果有时序数据，可以挖掘时序关联规则
4. 集成应用：将重要规则集成到临床决策支持系统中
